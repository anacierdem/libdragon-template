{
    "build": { "dockerfile": "./Dockerfile", "context": "../" },
    "runArgs": [
        "-v", "/tmp/.X11-unix:/tmp/.X11-unix",
        "-v", "${localEnv:XAUTHORITY}:${localEnv:XAUTHORITY}:ro",
        "-v", "${localEnv:XDG_RUNTIME_DIR}/pulse/native:${localEnv:XDG_RUNTIME_DIR}/pulse/native",
        "--device=/dev/bus/usb"
    ],
    "containerEnv": {
        "DISPLAY": "${localEnv:DISPLAY}",
        "PULSE_SERVER": "${localEnv:XDG_RUNTIME_DIR}/pulse/native",
        "XAUTHORITY": "${localEnv:XAUTHORITY}"
    },
    "customizations": {
        "vscode": {
            "extensions": ["ms-vscode.cpptools", "lici.libdragon-vscode"]
        }
    },
    "postAttachCommand": "make -C libdragon install tools-install -j $(getconf _NPROCESSORS_ONLN)"
}